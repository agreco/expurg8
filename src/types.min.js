define("type.Object",{alias:"{} auto mixed object",extend:__lib__.Sanitizer,contingency:{get:function(){return is_fun(this.fallback)?this.fallback():this.fallback},set:function(t){return console.warn(this.constructor[__classname__]+": Over-writing `contingency` property is not allowed, please use the `fallback` property instead."),t}},fallback:null,coerce:function(t){return this.valid(t=this.value(t))?t:this.contingency},stringify:function(t){return JSON.stringify(this.coerce(t))},valid:function(t){return this.validType(t)},test:function(){return this.valid(this.contingency)},validType:function(t){return t!==UNDEF},value:function(t){return t===UNDEF?this.contingency:t}}),define("type.Boolean",{alias:"bool boolean",extend:__lib__.type.Object,fallback:!1,validType:is_bool,value:Boolean.coerce}),define("type.Number",{alias:"num number",extend:__lib__.type.Object,fallback:0,max:Number.POSITIVE_INFINITY,min:Number.NEGATIVE_INFINITY,precision:__lib__.DECIMAL_PRECISION,coerce:function(t){return t=this.value(t),t>this.max&&(t=this.max),this.min>t&&(t=this.min),this.valid(t,!0)?int_undo(t,this.precision):this.contingency},valid:function(t,e){if(!is_num(t))return!1;var n=e===!0?t:int_from(t,this.precision);return this.parent(arguments)&&this.max>=n&&n>=this.min&&(e===!0||int_undo(n,this.precision)===t)},init:function(){switch(this.parent(),is_num(this.precision)||(this.precision=__lib__.DECIMAL_PRECISION),this.precision=Math.abs(Math.round(this.precision)),util.ntype(this.fallback)){case"function":break;default:this.fallback=int_undo(this.value(this.fallback),this.precision)}this.max!==Number.POSITIVE_INFINITY&&(this.max=this.value(this.max)),this.min!==Number.NEGATIVE_INFINITY&&(this.min=this.value(this.min))},test:function(){return this.valid(this.max,!0)&&this.valid(this.min,!0)&&is_int(this.precision)&&this.precision<=__lib__.DECIMAL_PRECISION&&Math.abs(this.precision)===this.precision&&this.parent()},validType:is_num,value:function(t){return int_from(t,this.precision)}}),define("type.Integer",{alias:"int integer",extend:__lib__.type.Number,precision:0,valid:function(t){return this.parent(t,!0)&&Math.floor(t)===t},init:function(){var t=this.max,e=this.min;this.precision=0,this.parent(arguments),t!==Number.POSITIVE_INFINITY&&(this.max=t),e!==Number.NEGATIVE_INFINITY&&(this.min=e)},value:function(){return Math.round(this.parent(arguments))}}),define("type.Array",{alias:"[] array",extend:__lib__.type.Object,max:__lib__.MAX_ARRAY_LENGTH,min:0,coerce:function(t,e){return t=this.prune(this.value(t)),e===!0||this.valid(t)?t:this.contingency},valid:function(t){return this.parent(arguments)&&t.length<=this.max&&t.length>=this.min},fallback:function(){return[]},init:function(){this.parent(),this.max=this.max>>>0,this.min=this.min>>>0},prune:function(t){return t.length>this.max&&(t.length=this.max),t},test:function(){return is_num(this.max)&&is_num(this.min)&&this.max<=__lib__.MAX_ARRAY_LENGTH&&this.min>=0&&this.max>=this.min&&this.parent()},validType:is_arr,value:function(t){return this.validType(t)?t:Array.coerce(t)}}),define("type.Collection",{alias:"collection",extend:__lib__.type.Array,itemType:"object",coerce:function(t){t=this.parent(t,!0);for(var e=-1,n=t.length;n>++e;)t[e]=this.coerceItem(t[e]);return this.valid(t)?t:this.contingency},valid:function(t){return this.parent(arguments)&&t.every(this.validItem,this)},coerceItem:function(t){return this.itemType.coerce(t)},init:function(){this.parent();var t=this.itemType;switch(util.ntype(t)){case"string":t=lookup(t);break;case"object":t instanceof __lib__.Sanitizer||(t=create(t));break;default:t=null}util.def(this,"itemType",{value:t},"e",!0)},test:function(){return this.itemType instanceof __lib__.Sanitizer&&this.parent()},validItem:function(t){return this.itemType.valid(t)}}),define("type.String",{alias:"str string",extend:__lib__.type.Array,fallback:"",flags:null,pattern:null,trim:!0,valid:function(t){return this.parent(arguments)&&this.validStr(t)},init:function(){this.parent(),is_str(this.pattern)&&(this.pattern=RegExp(this.pattern,is_str(this.flags)?this.flags:"")),is_re(this.pattern)?this.validStr=test_str:this.pattern=null},prune:function(t){return t.length>this.max&&(t=t.substring(0,this.max)),t},validStr:return_true,validType:is_str,value:function(t){return t=is_str(t)?t:t+"",t=this.trim===!1?t:t.trim()}}),define("type.Enum",{alias:"enum",extend:__lib__.type.Object,list:null,inverted:!1,valid:function(t){var e=!!~this.list.indexOf(t);return this.parent(arguments)&&(this.inverted===!0?!e:e)},fallback:function(){return this.list[0]},init:function(){this.parent(),is_str(this.list)&&(this.list=this.list.split(" "))},test:function(){return is_arr(this.list)&&this.parent()}}),define("type.Date",{alias:"date",extend:__lib__.type.Object,format:api.date.default_format,max:3250368e7,min:-621672192e5,coerce:function(t){return t=this.parent(arguments),+t>+this.max?new Date(+this.max):+this.min>+t?new Date(+this.min):t},stringify:function(t){return api.date.format(this.coerce(t),this.format)},valid:function(t){return this.parent(arguments)&&api.date.between(t,this.min,this.max)},fallback:function(){return new Date},init:function(){this.parent(),is_str(this.fallback)&&(this.fallback=this.value(this.fallback)),this.max=this.value(this.max),this.min=this.value(this.min)},test:function(){return this.valid(this.max)&&this.valid(this.min)&&this.parent()},validType:is_date,value:function(t){switch(util.ntype(t)){case"date":return t;case"number":return new Date(t);case"string":return api.date.coerce(t,this.format)}return this.contingency}});